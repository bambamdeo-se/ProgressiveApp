function stringGen(n){for(var t=" ",i="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<n;r++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}function impersonateUser(n){$.post("/User/ImpersonateUser",{UserId:n},function(n){n.Success?window.location.replace("/Security/Logout"):handleError(n.ErrorText)})}function stopImpersonation(){Cookies.remove("ImpersonateUserId",{path:"/"});window.location.replace("/Security/Logout?Impercination=Remove")}function addCommas(n){n+="";x=n.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2}function delimitFromMap(n,t){var i="";return $.map(n.toJSON(),function(n){i+=i!=""?"|":"";i+=n[t]}),i}function delimitFromObject(n,t){var i="";return $.each(n,function(){i+=i!=""?"|":"";i+=this[t]}),i}function delimitFromDom(n){var t="";return $(n).each(function(){t+=t==""?"":"|";t+=$(this).val()}),t}function htmlEncode(n){return $("<div/>").text(n).html()}function htmlDecode(n){return $("<div/>").html(n).text()}function encode(n){return n.replace(/"/g,'\\"').replace(/'/g,"\\'")}function isValidEmailAddress(n){return/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i.test(n)}function setDDL(n,t){$(n).data("kendoDropDownList").value(t==null?0:t)}function isIcheckChecked(n){return $(n).parent('[class*="icheckbox"]').hasClass("checked")}function getSelectedKendoItem(n,t){var i=$(n).data(t),r=i.select();return r?i.dataItem(r):null}function controlCRUDButtons(n,t){$("#add"+n+"Button").data("kendoButton").enable(t);$("#update"+n+"Button").data("kendoButton").enable(t);$("#delete"+n+"Button").data("kendoButton").enable(t)}function setICheck(){$(".i-checks").iCheck({checkboxClass:"icheckbox",radioClass:"iradio"})}function selectRadioButtonByValue(n,t){$("input[name="+n+"][value="+t+"]").iCheck("check")}function expandTreeNodesByType(n,t,i){for(var u,r=0;r<t.length;r++)t[r].Type==i&&(u=n.findByText(t[r].Name),n.expand(u)),t[r].hasChildren&&expandTreeNodesByType(n,t[r].children.view(),i)}function forceGridSelect(n,t){$("#"+t+" .k-grid-content").find("tr").removeClass("k-state-selected");$(n.currentTarget).closest("tr").addClass("k-state-selected")}function forceUniformHeight(n){var t=$(n).map(function(){return $(this).height()}).get(),i=Math.max.apply(null,t);$(n).css("height",i+"px")}function removeFromDataSource(n,t){var r=n.data();for(i=r.length-1;i>=0;i--)t===r[i].Id&&n.remove(r[i])}function removeAllFromDataSource(n){n.data([])}function clearKendoControl(n,t){var i=$(n).data(t);removeAllFromDataSource(i.dataSource)}function loadToTree(n,t,i,r,u){var f=$("#"+i).data("kendoTreeView"),e=f.dataSource;$.get(n,{id:t},function(n){$("input[name='checkedItems']:checkbox").removeAttr("checked");var o=$.parseJSON(JSON.stringify(n)),t,i,e,f=0;$.each(o,function(){this!=undefined&&(t=r&&r!=""?$("input:checkbox[value="+this.Id+"]").parent().next().find("img[src$='/Images/"+r+".png']").parent().prev().find("input:checkbox[value="+this.Id+"]"):$("input:checkbox[value="+this.Id+"]"),this.Type?(i=t.parent().next().find(".k-image").attr("src"),i!=undefined&&(e=i.replace("/Images/","").replace(".png",""),e==this.Type&&(t.prop("checked",!0),f++))):(t.prop("checked",!0),f++))});u&&typeof u=="function"&&u(f)})}function expandAllTreeNodes(n){var t=n.sender;t.expand(".k-item")}function preventDefault(n){n.preventDefault()}function notify(n,t,i,r,u){var f=i==undefined?!0:i,e=r==undefined?"7000":r,o=u==undefined?"1000":u;toastr.options={closeButton:!0,debug:!1,progressBar:f,positionClass:"toast-top-center",preventDuplicates:!0,onclick:null,showDuration:"400",hideDuration:"1000",timeOut:e,extendedTimeOut:o,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};toastr[n](t,n)}function error_handler(n){n.errors&&$.each(n.errors,function(n,t){"errors"in t&&$.each(t.errors,function(){parseExMessage(this)})})}function handleError(n){parseExMessage(n)}function parseExMessage(n){var t="",i;n.indexOf("|")!=-1?(i=n.split("|"),$.post("/Shell/GetError/",{Id:i[0]},function(n){t+=i[1]+'<div><a class="toggleErrMsg">-See details <i class="fa fa-chevron-down small"><\/i><\/a><\/div>';t+='<div id="errorDetails'+n.Id+'" class="p-t-xs collapse">';t+="<p>ID:<br/>"+n.Id+"<p>";t+="<p>Procedure:<br/>"+n.Procedure+"<p>";t+="<p>Error Number:<br/>"+n.ErrorNumber+"<p>";t+="<p>Line Number:<br/>"+n.LineNumber+"<p>";t+="<p>Message:<br/>"+n.ErrMessage+"<p>";t+="<p>User Name:<br/>"+n.UserName+"<p>";t+="<p>DateStamp:<br/>"+kendo.parseDate(n.DateStamp)+"<p>";t+="<\/div>";notify("error",t,!1,0,0);$("a.toggleErrMsg").click(function(t){$("#errorDetails"+n.Id).collapse("toggle");t.stopPropagation()});$("#errorDetails"+n.Id).click(function(n){n.stopPropagation()});$(".collapse").on("hide.bs.collapse",function(){$(".toggleErrMsg").html('-See details <i class="fa fa-chevron-down small"><\/i>')});$(".collapse").on("show.bs.collapse",function(){$(".toggleErrMsg").html('-See details <i class="fa fa-chevron-up small"><\/i>')})})):(t+=n+"\n",notify("error",t,!1,0,0))}function validVIN(n){var i=n.toUpperCase(),t=!0,r;if(i.match(/I|O|Q/)||i.length!=17)return!1;var e=i.substring(0,8),o=i.substring(9,17),u=e+o,f="";for(r=0;r<u.length;r++){for(t=u.charAt(r),zxc1=0;zxc1<zxcNAry.length;zxc1++)t==zxcNAry[zxc1][0]&&(t=zxcNAry[zxc1][1]);f+=t}for(t=0,zxc2=0;zxc2<zxcWAry.length;zxc2++)t+=f.charAt(zxc2)*zxcWAry[zxc2];return t=t%11,t==10&&(t="X"),t!=i.charAt(8)?!1:!0}var zxcNAry=[["A",1],["B",2],["C",3],["D",4],["E",5],["F",6],["G",7],["H",8],["J",1],["K",2],["L",3],["M",4],["N",5],["P",7],["R",9],["S",2],["T",3],["U",4],["V",5],["W",6],["X",7],["Y",8],["Z",9]],zxcWAry=[8,7,6,5,4,3,2,10,9,8,7,6,5,4,3,2];
/*!
 * jQuery Plugin: Are-You-Sure (Dirty Form Detection)
 * https://github.com/codedance/jquery.AreYouSure/
 *
 * Copyright (c) 2012-2014, Chris Dance and PaperCut Software http://www.papercut.com/
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Author:  chris.dance@papercut.com
 * Version: 1.9.0
 * Date:    13th August 2014
 */
(function(n){n.fn.areYouSure=function(t){var i=n.extend({message:"You have unsaved changes!",dirtyClass:"dirty",change:null,silent:!1,addRemoveFieldsMarksDirty:!1,fieldEvents:"change keyup propertychange input",fieldSelector:":input:not(input[type=submit]):not(input[type=button])"},t),f=function(t){if(t.hasClass("ays-ignore")||t.hasClass("aysIgnore")||t.attr("data-ays-ignore")||t.attr("name")===undefined)return null;if(t.is(":disabled"))return"ays-disabled";var i,r=t.attr("type");t.is("select")&&(r="select");switch(r){case"checkbox":case"radio":i=t.is(":checked");break;case"select":i="";t.find("option").each(function(){var t=n(this);t.is(":selected")&&(i+=t.val())});break;default:i=t.val()}return i},e=function(n){n.data("ays-orig",f(n))},u=function(t){var o=function(n){var t=n.data("ays-orig");return undefined===t?!1:f(n)!=t},u=n(this).is("form")?n(this):n(this).parents("form"),s,e;if(o(n(t.target))){r(u,!0);return}if($fields=u.find(i.fieldSelector),i.addRemoveFieldsMarksDirty&&(s=u.data("ays-orig-field-count"),s!=$fields.length)){r(u,!0);return}e=!1;$fields.each(function(){return $field=n(this),o($field)?(e=!0,!1):void 0});r(u,e)},o=function(t){var f=t.find(i.fieldSelector);n(f).each(function(){e(n(this))});n(f).unbind(i.fieldEvents,u);n(f).bind(i.fieldEvents,u);t.data("ays-orig-field-count",n(f).length);r(t,!1)},r=function(n,t){var r=t!=n.hasClass(i.dirtyClass);n.toggleClass(i.dirtyClass,t);r&&(i.change&&i.change.call(n,n),t&&n.trigger("dirty.areYouSure",[n]),t||n.trigger("clean.areYouSure",[n]),n.trigger("change.areYouSure",[n]))},s=function(){var t=n(this),r=t.find(i.fieldSelector);n(r).each(function(){var t=n(this);t.data("ays-orig")||(e(t),t.bind(i.fieldEvents,u))});t.trigger("checkform.areYouSure")},h=function(){o(n(this))};return i.silent||window.aysUnloadSet||(window.aysUnloadSet=!0,n(window).bind("beforeunload",function(){if($dirtyForms=n("form").filter("."+i.dirtyClass),$dirtyForms.length!=0){if(navigator.userAgent.toLowerCase().match(/msie|chrome/)){if(window.aysHasPrompted)return;window.aysHasPrompted=!0;window.setTimeout(function(){window.aysHasPrompted=!1},900)}return i.message}})),this.each(function(){if(n(this).is("form")){var t=n(this);t.submit(function(){t.removeClass(i.dirtyClass)});t.bind("reset",function(){r(t,!1)});t.bind("rescan.areYouSure",s);t.bind("reinitialize.areYouSure",h);t.bind("checkform.areYouSure",u);o(t)}})}})(jQuery);